<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      lang="en">
    <head>
        <meta charset="UTF-8">
        <link rel="shortcut icon" href="#" />
        <title>私信页面</title>
        <script src="../static/js/jquery/jquery-3.3.1.js"></script>
       <!-- <script src="js/jquery/jquery-3.3.1.js"></script>-->
        <link rel="stylesheet" type="text/css" href="../static/css/bootstrap/bootstrap.css">
        <script src="../static/css/bootstrap/bootstrap.js"></script>

        <link rel="stylesheet" type="text/css" href="chat.css">
        <script src="chat.js"></script>
    </head>
    <body>

        <div>
            <!--//在线人数-->
            <div id="chat-online-div">
                <span>聊天好友</span>
                <ul id="chat-user-list-ul">
                   <li>
                        <img src='../static/img/header/0.jpg' height='40px' width='40px' >
                        <span>aaa</span>
                        <button class="chat-start-btn">私信</button>
                    </li>
                    <li>
                        <img src='../static/img/header/0.jpg' height='40px' width='40px' >
                        <span>bbb</span>
                        <button class="chat-start-btn">私信</button>
                    </li>


                </ul>
            </div>
        </div>
        <!--聊天窗口-->
        <div id="chat-windows">
            <!--顶部名称-->
            <div id="chat-windows-top">
                <span id="chat-name">外星人</span>
            </div>
            <!--聊天窗口内容展示-->
            <div id="chat-windows-content">
                <!--<div class="chat-send-msg">
                    <img src="../static/img/header/0.jpg" height="40px" width="40px" class="send-img">
                    <span class="chat-send-msg-content">苏打粉放大萨芬达到所法规和大师傅客户机大三角发苏打粉放大萨芬达到所法规和大师傅客户机大三角发苏打粉放大萨芬达到所法规和大师傅客户机大三角发
                    </span>
                </div>


                </br>

                <div class="chat-receiver-msg">
                    <img src="../static/img/header/0.jpg"  height="40px" width="40px">
                    <div>
                        <span class="chat-rec-msg-content" style="left: 40px; position: relative">hasssssssssssaaaaaaaaaaaazzzz</span>
                    </div>

                </div>
                </br>-->
            </div>
            <!--底部编辑发送-->
            <div id="chat-windows-edit">
                <input type="text" id="chat-edit-input">
                <button id="chat-send-btn">发送</button>
            </div>
        </div>









       <!-- <div>
            <div>
                <input id="myid" placeholder="myid">
                <button id="login-button" onclick="login()">登录</button>
            </div>
            <div>
                <button id="getlogin-button" onclick="getlogin()">获取登录用户</button>
                <input id="curLoginUser" value="当前无用户登录"/>
            </div>
            <div id="input-box">
                <input class="chat-input" id="chat-input" placeholder="message"></input>
                <input id="friendid" placeholder="friendid">
                <button class="chat-button" id="send" onclick="send()">发送</button>
            </div>

            <div>
                <input id="chat-rec" placeholder="message"></input>
            </div>

        </div>-->

    </body>

    <script>
        var ipaddress = "127.0.0.1";
        //新建socket对象
        window.socket = new WebSocket("ws://" + ipaddress + ":8110/ws");
        //监听netty服务器消息并打印到页面上
        socket.onmessage = function (event) {
            var datas = event.data.split(",");
            console.log("服务器消息====" + datas);
            $("#chat-rec").val(datas);
        }

        //将发送人接收人的id和要发生的消息发送出去
        function send() {
            console.log("send status = " + socket.readyState)
            console.log($("#chat-input").val())
            var data = $("#myid").val() + "," + $("#friendid").val() + "," + $("#chat-input").val()
            socket.send(data)
        }

        //登录事件
        function login() {
            console.log("send status = " + socket.readyState)
            var data = $("#myid").val();
            socket.send(data);
        }
    </script>

</html>